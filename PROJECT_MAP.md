# AlgoLounge Project Map

Visual guide to the restructured project.

## Directory Structure

```
algolounge.com/
│
├── 📁 frontend/                        (Angular 19.2 Application)
│   ├── src/                           (Angular source code)
│   ├── public/                        (Static assets)
│   ├── angular.json                   (Angular CLI config - outputs to ../backend/public)
│   ├── package.json                   (Frontend dependencies)
│   ├── tsconfig.json                  (TypeScript config)
│   └── README.md                      (Angular app docs)
│
├── 📁 backend/                         (Express.js API Server)
│   ├── 📁 src/
│   │   ├── 📁 controllers/            (Route handlers)
│   │   │   ├── authController.ts      (signup/signin routes)
│   │   │   └── favoriteCoursesController.ts
│   │   ├── 📁 services/               (Business logic)
│   │   │   ├── authService.ts         (auth logic, JWT, password hashing)
│   │   │   └── favoriteCoursesService.ts
│   │   ├── 📁 models/                 (Drizzle ORM schemas)
│   │   │   ├── users.ts               (user table schema)
│   │   │   ├── favoriteCourses.ts     (favorite_courses table schema)
│   │   │   └── index.ts               (exports)
│   │   ├── 📁 db/                     (Database)
│   │   │   ├── index.ts               (database instance setup)
│   │   │   └── migrations/            (auto-generated migrations)
│   │   ├── 📁 middleware/             (Express middleware)
│   │   │   └── auth.ts                (JWT verification middleware)
│   │   └── index.ts                   (Express app setup, routes)
│   ├── 📁 public/                     (Built Angular app - generated by build)
│   ├── drizzle.config.ts              (Drizzle ORM configuration)
│   ├── package.json                   (Backend dependencies)
│   ├── tsconfig.json                  (TypeScript config)
│   ├── .env                           (Local environment variables)
│   ├── .env.example                   (Environment template)
│   ├── .gitignore                     (Git ignore rules)
│   └── README.md                      (Backend development guide)
│
├── 📄 setup                            (Setup script - git pull, npm install, migrate)
├── 📄 start                            (Start script - runs both servers)
│
├── 📄 README.md                        (Original project README)
├── 📄 README_SETUP.md                  (Setup and usage guide - START HERE)
├── 📄 QUICKSTART.md                    (2-command quick start)
├── 📄 RESTRUCTURE_SUMMARY.md           (Details of restructuring)
├── 📄 PROJECT_MAP.md                   (This file)
├── 📄 CLAUDE.md                        (Claude Code project instructions)
├── 📄 plan.txt                         (Architecture requirements)
│
├── 📁 .git/                            (Git repository)
├── 📁 .vscode/                         (VS Code config)
├── 📁 .claude/                         (Claude Code config)
└── ... (other root files)
```

## Quick Reference

### Running the Project

```bash
# First time
./setup

# Development
./start

# Frontend is at http://localhost:4200
# Backend API is at http://localhost:3000
```

### Key Files by Purpose

#### Setup & Configuration
- `plan.txt` - Architecture requirements
- `README_SETUP.md` - Complete setup guide
- `QUICKSTART.md` - 2-command start
- `.env` files - Environment config

#### Backend Code
- `backend/src/index.ts` - Express app entry point
- `backend/src/controllers/` - Route handlers
- `backend/src/services/` - Business logic
- `backend/src/models/` - Database schemas
- `backend/drizzle.config.ts` - Database config

#### Frontend Code
- `frontend/src/main.ts` - Angular entry point
- `frontend/src/app/` - Angular components/services
- `frontend/angular.json` - Angular configuration

#### Documentation
- `README_SETUP.md` - How to set up and use
- `backend/README.md` - Backend development
- `RESTRUCTURE_SUMMARY.md` - What changed
- `PROJECT_MAP.md` - This file

## API Endpoints

### Authentication
```
POST /api/auth/signup  - Create new user
POST /api/auth/signin  - Login user
```

### Protected Endpoints (require Authorization header)
```
GET    /api/favorites  - Get user's favorite courses
POST   /api/favorites  - Add course to favorites
DELETE /api/favorites  - Remove course from favorites
```

## Database

**Type:** SQLite
**ORM:** Drizzle
**Location:** `backend/algolounge.db`

**Tables:**
- `users` - User accounts (id, username, email, passwordHash)
- `favorite_courses` - Favorite courses per user (id, userId, courseFilename)

## Technology Stack

### Frontend
- Angular 19.2
- TypeScript
- PrimeNG (UI components)
- RxJS (reactive programming)

### Backend
- Node.js (ES modules)
- Express.js (web framework)
- Drizzle ORM (database)
- SQLite (database)
- TypeScript
- JWT (authentication)
- bcryptjs (password hashing)

### Tools
- Shell scripts for automation
- npm for dependency management
- tsx for TypeScript running/building

## Development Workflow

```
1. Make changes to frontend or backend code
2. Changes hot reload automatically
3. Backend: Use npm run db:generate if you modify models
4. Test API endpoints with curl or Postman
5. Debug in browser (frontend) or terminal (backend)
```

## Next Steps to Integrate Frontend

1. **Create Angular Services**
   - `AuthService` - signup, signin, logout, token management
   - `FavoriteCoursesService` - fetch, add, remove favorites
   - `HttpClient` interceptor - add Authorization header

2. **Create Components**
   - Sign Up page with form validation
   - Sign In page with remember-me option
   - Update existing Courses page to use backend

3. **Add State Management**
   - Track current user
   - Cache favorites locally
   - Handle login/logout

4. **Update Navigation**
   - Show user info when logged in
   - Login/logout buttons
   - Protected routes

## Common Tasks

### Add New API Endpoint

1. Create model in `backend/src/models/`
2. Generate migration: `npm run db:generate`
3. Create service in `backend/src/services/`
4. Create controller in `backend/src/controllers/`
5. Add route in `backend/src/index.ts`

### Change Database Schema

1. Edit schema file in `backend/src/models/`
2. Run: `npm run db:generate`
3. Review migration in `backend/src/db/migrations/`
4. Run: `npm run db:push`

### Update Angular Build Output

- Already configured in `frontend/angular.json`
- Outputs to `../backend/public/`
- Express serves it as static files

## File Sizes Reference

- `backend/src/` - ~10 TypeScript files (~2KB each)
- `frontend/src/` - ~30+ existing files
- Total setup overhead - ~50KB of new code

## Important Notes

1. **No Root package.json** - Each folder is independent
2. **Separate Dependencies** - Frontend and backend manage their own
3. **Hot Reload** - Both servers watch files and auto-reload
4. **Database** - SQLite is simple and sufficient for dev/small deployments
5. **Production Ready** - Structure supports scaling to larger deployments

## Troubleshooting Quick Links

- Port issues: `README_SETUP.md` → Troubleshooting
- Database errors: `backend/README.md` → Troubleshooting
- Setup problems: `README_SETUP.md` → Troubleshooting
- API endpoints: `backend/README.md` → API Routes

---

**Quick Start:** `./setup && ./start`
**Read First:** `README_SETUP.md`
**Ask Questions:** Check `RESTRUCTURE_SUMMARY.md` for context

