# AlgoLounge Project Map

Visual guide to the restructured project.

## Directory Structure

```
algolounge.com/
â”‚
â”œâ”€â”€ ğŸ“ frontend/                        (Angular 19.2 Application)
â”‚   â”œâ”€â”€ src/                           (Angular source code)
â”‚   â”œâ”€â”€ public/                        (Static assets)
â”‚   â”œâ”€â”€ angular.json                   (Angular CLI config - outputs to ../backend/public)
â”‚   â”œâ”€â”€ package.json                   (Frontend dependencies)
â”‚   â”œâ”€â”€ tsconfig.json                  (TypeScript config)
â”‚   â””â”€â”€ README.md                      (Angular app docs)
â”‚
â”œâ”€â”€ ğŸ“ backend/                         (Express.js API Server)
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ controllers/            (Route handlers)
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.ts      (signup/signin routes)
â”‚   â”‚   â”‚   â””â”€â”€ favoriteCoursesController.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/               (Business logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.ts         (auth logic, JWT, password hashing)
â”‚   â”‚   â”‚   â””â”€â”€ favoriteCoursesService.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/                 (Drizzle ORM schemas)
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts               (user table schema)
â”‚   â”‚   â”‚   â”œâ”€â”€ favoriteCourses.ts     (favorite_courses table schema)
â”‚   â”‚   â”‚   â””â”€â”€ index.ts               (exports)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ db/                     (Database)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               (database instance setup)
â”‚   â”‚   â”‚   â””â”€â”€ migrations/            (auto-generated migrations)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/             (Express middleware)
â”‚   â”‚   â”‚   â””â”€â”€ auth.ts                (JWT verification middleware)
â”‚   â”‚   â””â”€â”€ index.ts                   (Express app setup, routes)
â”‚   â”œâ”€â”€ ğŸ“ public/                     (Built Angular app - generated by build)
â”‚   â”œâ”€â”€ drizzle.config.ts              (Drizzle ORM configuration)
â”‚   â”œâ”€â”€ package.json                   (Backend dependencies)
â”‚   â”œâ”€â”€ tsconfig.json                  (TypeScript config)
â”‚   â”œâ”€â”€ .env                           (Local environment variables)
â”‚   â”œâ”€â”€ .env.example                   (Environment template)
â”‚   â”œâ”€â”€ .gitignore                     (Git ignore rules)
â”‚   â””â”€â”€ README.md                      (Backend development guide)
â”‚
â”œâ”€â”€ ğŸ“„ setup                            (Setup script - git pull, npm install, migrate)
â”œâ”€â”€ ğŸ“„ start                            (Start script - runs both servers)
â”‚
â”œâ”€â”€ ğŸ“„ README.md                        (Original project README)
â”œâ”€â”€ ğŸ“„ README_SETUP.md                  (Setup and usage guide - START HERE)
â”œâ”€â”€ ğŸ“„ QUICKSTART.md                    (2-command quick start)
â”œâ”€â”€ ğŸ“„ RESTRUCTURE_SUMMARY.md           (Details of restructuring)
â”œâ”€â”€ ğŸ“„ PROJECT_MAP.md                   (This file)
â”œâ”€â”€ ğŸ“„ CLAUDE.md                        (Claude Code project instructions)
â”œâ”€â”€ ğŸ“„ plan.txt                         (Architecture requirements)
â”‚
â”œâ”€â”€ ğŸ“ .git/                            (Git repository)
â”œâ”€â”€ ğŸ“ .vscode/                         (VS Code config)
â”œâ”€â”€ ğŸ“ .claude/                         (Claude Code config)
â””â”€â”€ ... (other root files)
```

## Quick Reference

### Running the Project

```bash
# First time
./setup

# Development
./start

# Frontend is at http://localhost:4200
# Backend API is at http://localhost:3000
```

### Key Files by Purpose

#### Setup & Configuration
- `plan.txt` - Architecture requirements
- `README_SETUP.md` - Complete setup guide
- `QUICKSTART.md` - 2-command start
- `.env` files - Environment config

#### Backend Code
- `backend/src/index.ts` - Express app entry point
- `backend/src/controllers/` - Route handlers
- `backend/src/services/` - Business logic
- `backend/src/models/` - Database schemas
- `backend/drizzle.config.ts` - Database config

#### Frontend Code
- `frontend/src/main.ts` - Angular entry point
- `frontend/src/app/` - Angular components/services
- `frontend/angular.json` - Angular configuration

#### Documentation
- `README_SETUP.md` - How to set up and use
- `backend/README.md` - Backend development
- `RESTRUCTURE_SUMMARY.md` - What changed
- `PROJECT_MAP.md` - This file

## API Endpoints

### Authentication
```
POST /api/auth/signup  - Create new user
POST /api/auth/signin  - Login user
```

### Protected Endpoints (require Authorization header)
```
GET    /api/favorites  - Get user's favorite courses
POST   /api/favorites  - Add course to favorites
DELETE /api/favorites  - Remove course from favorites
```

## Database

**Type:** SQLite
**ORM:** Drizzle
**Location:** `backend/algolounge.db`

**Tables:**
- `users` - User accounts (id, username, email, passwordHash)
- `favorite_courses` - Favorite courses per user (id, userId, courseFilename)

## Technology Stack

### Frontend
- Angular 19.2
- TypeScript
- PrimeNG (UI components)
- RxJS (reactive programming)

### Backend
- Node.js (ES modules)
- Express.js (web framework)
- Drizzle ORM (database)
- SQLite (database)
- TypeScript
- JWT (authentication)
- bcryptjs (password hashing)

### Tools
- Shell scripts for automation
- npm for dependency management
- tsx for TypeScript running/building

## Development Workflow

```
1. Make changes to frontend or backend code
2. Changes hot reload automatically
3. Backend: Use npm run db:generate if you modify models
4. Test API endpoints with curl or Postman
5. Debug in browser (frontend) or terminal (backend)
```

## Next Steps to Integrate Frontend

1. **Create Angular Services**
   - `AuthService` - signup, signin, logout, token management
   - `FavoriteCoursesService` - fetch, add, remove favorites
   - `HttpClient` interceptor - add Authorization header

2. **Create Components**
   - Sign Up page with form validation
   - Sign In page with remember-me option
   - Update existing Courses page to use backend

3. **Add State Management**
   - Track current user
   - Cache favorites locally
   - Handle login/logout

4. **Update Navigation**
   - Show user info when logged in
   - Login/logout buttons
   - Protected routes

## Common Tasks

### Add New API Endpoint

1. Create model in `backend/src/models/`
2. Generate migration: `npm run db:generate`
3. Create service in `backend/src/services/`
4. Create controller in `backend/src/controllers/`
5. Add route in `backend/src/index.ts`

### Change Database Schema

1. Edit schema file in `backend/src/models/`
2. Run: `npm run db:generate`
3. Review migration in `backend/src/db/migrations/`
4. Run: `npm run db:push`

### Update Angular Build Output

- Already configured in `frontend/angular.json`
- Outputs to `../backend/public/`
- Express serves it as static files

## File Sizes Reference

- `backend/src/` - ~10 TypeScript files (~2KB each)
- `frontend/src/` - ~30+ existing files
- Total setup overhead - ~50KB of new code

## Important Notes

1. **No Root package.json** - Each folder is independent
2. **Separate Dependencies** - Frontend and backend manage their own
3. **Hot Reload** - Both servers watch files and auto-reload
4. **Database** - SQLite is simple and sufficient for dev/small deployments
5. **Production Ready** - Structure supports scaling to larger deployments

## Troubleshooting Quick Links

- Port issues: `README_SETUP.md` â†’ Troubleshooting
- Database errors: `backend/README.md` â†’ Troubleshooting
- Setup problems: `README_SETUP.md` â†’ Troubleshooting
- API endpoints: `backend/README.md` â†’ API Routes

---

**Quick Start:** `./setup && ./start`
**Read First:** `README_SETUP.md`
**Ask Questions:** Check `RESTRUCTURE_SUMMARY.md` for context

