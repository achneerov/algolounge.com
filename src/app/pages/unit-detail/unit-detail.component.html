<div class="unit-detail-container">
  <div class="unit-header">
    <div class="header-top">
      <button class="back-btn" (click)="goBackToCourse()">← Back to Course</button>
    </div>
    <h1 *ngIf="unit">{{ unit.title }}</h1>
    <p *ngIf="unit?.description" class="unit-description">{{ unit?.description }}</p>
    <p *ngIf="course" class="course-context">Part of: {{ course.course_name }}</p>
  </div>

  <div class="questions-section" *ngIf="unit">
    <div class="questions-list" *ngIf="unit.questions.length > 0">
      <div
        *ngFor="let question of unit.questions"
        class="question-item"
        [class.completed]="isQuestionCompleted(question.filename)"
        (click)="onQuestionClick(question)"
      >
        <div class="question-content">
          <div class="tags-container" *ngIf="question.tags && question.tags.length > 0">
            <span
              *ngFor="let tag of question.tags"
              class="difficulty-tag"
              [style.background-color]="tag.color + '20'"
              [style.color]="tag.color"
              [style.border]="'1px solid ' + tag.color + '40'"
            >
              {{ tag.text }}
            </span>
          </div>
          <h3>{{ question.title }}</h3>
        </div>
        <div class="question-actions">
          <button
            *ngFor="let urlItem of question.urls"
            class="url-btn"
            [style.background-color]="urlItem.color + '40'"
            [style.border]="'1px solid ' + urlItem.color + '60'"
            [style.color]="urlItem.color"
            (click)="onUrlClick($event, urlItem.url)"
            [title]="urlItem.tooltip"
          >
            🔗
          </button>
          <span *ngIf="isQuestionCompleted(question.filename)" class="completion-check">✅</span>
        </div>
      </div>
    </div>

    <div *ngIf="unit.questions.length === 0" class="no-questions">
      <p>No questions in this unit yet.</p>
    </div>
  </div>

  <div *ngIf="!unit" class="loading">
    <p>Loading unit...</p>
  </div>
</div>